{% extends '::twoColumnLayout.html.twig' %}

{% block javascripts %}
    {{ parent() }}
     <script src="{{ asset('js/likes.js') }}" type="text/javascript"></script>
     <script src="{{ asset('js/postForm.js') }}" type="text/javascript"></script>
     <script src="{{ asset('js/replyForm.js') }}" type="text/javascript"></script>
{% endblock %}

{% block content %}
        <div id="content_left">
            <div id="formMenu" {% if showForm %} class="formBool" {% endif %}>
                <p>
                    <a class="add_post_button" href="{{ path('MooiWallBundle_WallAdd', {'id': id }) }}">Voeg een post toe</a>
                </p>
                {% include 'MooiWallBundle:Wall:postForm.html.twig' %}
            </div>
            
            {% for wallOwnerPost in wallOwner.getWallOwnerPosts %}
            <div class="post">
                <h2>
                    {{ wallOwnerPost.getWallOwner().getUserName() }}<span> over </span>{{wallOwnerPost.getSubject}}
                </h2>
                    <img src="{{ asset('images/mainPost_avatar.png') }}" alt="mainPost"/>
                <p class="post_text">
                    {{ wallOwnerPost.getText() }}
                </p>
                <div class="image_gallery">
                    <img src="{{ asset('images/afbeelding.gif') }}" alt="" />
                    <img src="{{ asset('images/afbeelding.gif') }}" alt="" />
                    <img src="{{ asset('images/afbeelding.gif') }}" alt="" />
                </div>
                <ul class="postItems">
                    <li>
                        <a class="like_button" href="{{ path('MooiWallBundle_WallLike', {'postId' : wallOwnerPost.getId()}) }}">Vind ik goed</a>
                        <p class="likes">
                            {% if wallOwnerPost.getLikes() %}
                                <span>{{ wallOwnerPost.getLikes() }}</span> likes
                            {% endif %}    
                        </p>
                    </li>
                    <li><a class="commentButton" href="{{ wallOwnerPost.getId() }}">Reageer</a></li>
                    <li>{{ wallOwnerPost.time|date('l,  j F Y') }}</li>
                </ul>
                {% if wallOwnerPost.getWallOwner().getId() == id %}
                <a href="{{ path('MooiWallBundle_WallEdit', {'postId': wallOwnerPost.getId() }) }}">
                    <img class="edit_post_button" src="{{ asset('images/edit_post_button.png') }}" alt="" />
                </a>
                <a class="confirm" href="{{ path('MooiWallBundle_WallDelete', {'postId' : wallOwnerPost.getId()}) }}">
                            <img class="delete_post_button" src="{{ asset('images/close_delete.png') }}" alt="" />
                            <h3 class="head">Post verwijderen</h3>
                            <p class="body">Weet je zeker dat je de post van {% if user.getUserName == wallOwnerPost.getWallOwner().getUserName() %} jezelf {% else %} {{ wallOwnerPost.getWallOwner().getUserName() }} {% endif %} wilt verwijderen?</p>
                        </a>
                {% endif %}
            </div>
            <div id="replyFormShow{{ wallOwnerPost.getId }}" class="replyFormCheck{% if wallOwnerPost.getReplyForm.show %} formReplyBool{% endif %}" >
                {% form_theme wallOwnerPost.getReplyForm.form '::baseForm.html.twig' %}
                <form class="replyForm replyFormShow{{ wallOwnerPost.getId() }}" action="{{ wallOwnerPost.getReplyForm.action }}" method="post" autocomplete="off" {{ form_enctype(wallOwnerPost.getReplyForm.form ) }} >
                    <div class="form_row">
                        <div class="clearfix"></div>
                    </div>
                    {{ form_widget(wallOwnerPost.getReplyForm.form ) }}
                    <div class="button">
                        <input type="submit" class="button" value="Plaatsen" />
                        <div class="clearfix"></div>
                    </div>
                </form>
            </div>
            <div class="replies">
                {% if wallOwnerPost.getReplies | length > 0 %}
                <h2>Reacties</h2>
                {% endif %}
                {% for reply in wallOwnerPost.getReplies %}
                <div class="reply">
                    {% if reply.getSender.getId == wallOwner.getId %}
                        <img class="avatar_left" src="{{ asset('images/reply_avatar.png') }}" alt="reply avatar"/>
                        <p class="reply_right">
                            {{ reply.text }}
                        </p>
                    {% else %}
                        <img class="avatar_right" src="{{ asset('images/reply_avatar.png') }}" alt="reply avatar"/>
                        <p class="reply_left">
                            {{ reply.text }}
                        </p>
                    {% endif %}
                    <ul class="replyItems">
                        <li><a href="{{ path('MooiWallBundle_WallIndex', {'id': reply.getSender.getId }) }}">{{ reply.getSender.getUserName }}</a></li>
                        <li>{{ reply.time|date('l,  j F Y') }}</li>
                    </ul>
                </div>
                {% endfor %}
            </div>   
            {% else %}
                <div class="empty">Er zijn nog geen posts op deze wall</div>
            {% endfor %} 
        </div>    
        
{% endblock %}

{% block sidebarContent %}
    <h1>Filters</h1>
    <p>Hier kan door wallposts gezocht worden</p>
{% endblock %}
